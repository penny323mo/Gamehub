# Snooker 2D Project Review Report
> Generated by OpenClaw (Chief of Staff) | Date: 2026-02-04

## 1. 執行總結 (Executive Summary)
專案目前處於 **「可運行原型 (Functional Prototype)」** 階段。基礎物理同介面已經成型，但存在 **3 個嚴重物理漏洞 (Critical Bugs)**，會導致遊戲崩潰或不合邏輯。規則方面，適合單人練習，但缺乏標準 Snooker 嘅嚴謹性（如 Respot 規則）。

## 2. 發現嘅問題 (Issues & Bugs)

### 🔴 高危漏洞 (Critical)
1.  **Respot 爆炸問題 (The "Explosion" Bug)**
    *   **現象**：當彩波（如黑柴）要重置（Respot），但該點已有其他波，系統會強行重疊擺放。
    *   **後果**：物理引擎偵測到兩波重疊，下一幀會施加極大彈力，導致兩波瞬間「炸開」飛出場外。
    *   **解決**：需加入 `getSafeRespotPosition()`，檢查點位是否被佔，若被佔需按規則移位。

2.  **穿透問題 (Tunneling)**
    *   **現象**：大力擊球時，波速過快（>2000px/s），導致在一幀（frame）內移動距離超過波身直徑。
    *   **後果**：兩波可能直接穿過對方而冇碰撞。
    *   **解決**：增加物理 Sub-step 次數，或限制最大力度。

3.  **瞄準微移 (Aim Jitter)**
    *   **現象**：瞄準後，按下鼠標準備拉桿儲力嗰一刻，滑鼠輕微移動會導致角度偏移。
    *   **後果**：極難打出精準直線球。
    *   **解決**：UI 改良——按下時先「鎖定角度」，拖動只改變力度。

### 🟡 邏輯與體驗 (Logic & UX)
4.  **物理阻力感 (Floaty Friction)**
    *   目前使用「空氣阻力」（指數衰減），感覺似喺油面滑行。
    *   真實 Snooker 應使用「滾動摩擦」（線性減速），波會停得更乾脆。

5.  **袋口判定 (Rectangular Cushions)**
    *   目前袋口無「角位」（Jaws），波撞到袋邊 1px 會直接反彈，唔會有真實嘅「浪袋」或彈入效果。

6.  **Baulk Line 不一致**
    *   畫線位置 (`W*0.22`) 與 實際可擺位區域 (`W*0.25`) 不符，導致可犯規擺波。

## 3. 優化建議 (Recommendations)

### 即時修復 (Quick Wins)
*   [ ] **Fix Respot**: 加邏輯 `if (isOccupied(spot)) findNearestSpot()`.
*   [ ] **Fix Tunneling**: 將物理更新頻率由 120Hz 提升至 240Hz 或以上。
*   [ ] **UI Lock**: 分離「瞄準」與「力度」操作狀態。

### 長遠改進 (Roadmap)
*   **物理升級**: 改用線性摩擦力，模擬絨布真實感。
*   **幾何袋口**: 引入圓角 Cushion 碰撞，模擬真實入袋難度。
*   **完整規則**: 加入 Free Ball, Miss 規則判定。

## 4. 下一步行動建議
建議優先修復 **Respot 爆炸** 及 **瞄準微移**，因為呢兩個最影響可玩性。確認後我可立即執行修復。
