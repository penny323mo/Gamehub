<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gomoku</title>
    <link rel="stylesheet" href="gomoku.css">
</head>

<body>
    <div class="switch-container gomoku-menu-container">
        <main class="switch-card">
            <h1>五子棋</h1>

            <!-- Landing Page / Game Selection -->
            <div id="landing-page">
                <div class="landing-actions">
                    <button id="gomoku-ai-btn" class="pill-btn mode-btn" data-action="ai" onclick="selectMode('ai')">對
                        AI 對戰</button>
                    <button id="gomoku-online-btn" class="pill-btn mode-btn" data-action="online"
                        onclick="selectMode('online')">ONLINE 對戰</button>
                    <button id="gomoku-back-btn" class="pill-btn secondary" data-action="back"
                        onclick="goToLauncher()">返回遊戲大廳</button>
                </div>
            </div>

            <!-- Game Container (Hidden on Landing) -->
            <div id="game-container" class="hidden">

                <!-- VS AI Specific Controls -->
                <div id="ai-controls" class="hidden">
                    <div class="controls-card">
                        <label for="difficulty">難度：</label>
                        <select id="difficulty" class="pill-select">
                            <option value="easy">Easy</option>
                            <option value="medium">Medium</option>
                            <option value="hard" selected>Hard</option>
                        </select>
                        <button class="pill-btn secondary" onclick="backToLanding()">返回選單</button>
                    </div>
                </div>

                <!-- Online Lobby (New) -->
                <div id="online-lobby" class="hidden">
                    <h3>線上對戰大廳</h3>
                    <div class="lobby-actions">
                        <div class="action-section">
                            <button class="pill-btn" onclick="createRoom()">創建房間 (自動生成)</button>
                        </div>
                        <div class="divider-text">或</div>
                        <div class="action-section">
                            <input type="text" id="room-code-input" placeholder="輸入 6 位房號" class="pill-select"
                                style="text-transform:uppercase; text-align:center; width: 140px;">
                            <button class="pill-btn secondary"
                                onclick="joinRoom(document.getElementById('room-code-input').value)">加入房間</button>
                        </div>
                    </div>
                    <br>
                    <button class="pill-btn secondary" onclick="backToLanding()">返回選單</button>
                </div>

                <!-- Online Room View (Board + Details) -->
                <div id="online-room" class="hidden">
                    <div class="room-header-card">
                        <div class="room-status">
                            <span class="label">房間：</span><span id="current-room-id" class="value">??????</span>
                            <span class="divider">|</span>
                            <span class="label">身份：</span><span id="my-role" class="value">載入中...</span>
                        </div>
                    </div>

                    <div id="waiting-msg" style="margin-bottom:10px; color:var(--neon-green);">等待對手加入...</div>

                    <div class="room-actions">
                        <button id="online-restart-btn" class="pill-btn action-btn hidden"
                            onclick="requestRestart()">再戰一局</button>
                        <button id="leave-room-btn" class="pill-btn danger-btn" onclick="leaveRoom()">退出房間</button>
                    </div>
                </div>

                <!-- Common Game Elements (Board, Status) -->
                <div id="game-board-area" class="hidden">
                    <div class="board-frame">
                        <canvas id="gomoku-board"></canvas>
                    </div>
                    <div id="status-bar">
                        <div id="status">當前回合：<span class="player-turn">黑子</span></div>
                    </div>
                    <!-- Only for AI mode, Online has its own restart logic -->
                    <button id="reset-btn" class="pill-btn action-btn" onclick="resetGame()">重新開始</button>
                </div>

            </div>
        </main>
    </div>
    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/core.js"></script>
    <script src="js/renderer.js"></script>
    <script src="js/ai.js"></script>
    <script src="js/online.js"></script>
    <script src="js/input.js"></script>
    <script src="js/app.js"></script>
</body>

</html>